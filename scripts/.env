# Ceph Mesh Cluster Environment Variables

# Node definitions
MON_INITIAL_MEMBERS=pve01,pve02,pve03
FSID=9e29d2c9-c33c-40ad-93cc-fbb8fd91de22

# Ceph MONs (IPv6 mesh loopbacks over Thunderbolt)
MESH_IPV6_MAP="pve01=fd42:42::1 pve02=fd42:42::2 pve03=fd42:42::3"
MON_HOSTS=fd42:42::1,fd42:42::2,fd42:42::3

# Corosync ring interfaces (IPv4)
RING0_IPV4_MAP="pve01=10.1.2.11 pve02=10.1.2.12 pve03=10.1.2.13"   # TB NICs
RING1_IPV4_MAP="pve01=10.0.0.1 pve02=10.0.0.2 pve03=10.0.0.3"       # Cluster mesh fallback

# DNS / hostname resolution
DNS_ORDER="ad.famille-clerc.com famille-clerc.com"
RESOLUTION_ORDER="files dns myhostname"

# Networking
CEPH_PUBLIC_NETWORK=fc00::/8
CEPH_CLUSTER_NETWORK=fc00::/8

# Cluster usage of mesh
CLUSTER_MESH_IPV4=true     # Enables Corosync ring1
CEPH_MESH_IPV6=true        # Enables Ceph IPv6 loopbacks

# Backup behavior
CEPH_BACKUP_DIR=/etc/pve/backup
CEPH_BACKUP_TIMESTAMPED=true

# --- Core Cluster Settings ---
CLUSTER_NAME=pve-cluster01              # Unique cluster ID
EXPECTED_NODES=3                        # Total node count
CLUSTER_MASTER=pve01                    # Node that initializes the cluster

# --- Networking ---
INTERFACE=enp100s0                      # Interface for Corosync & transport
BINDNETADDR=10.1.2.0                    # Subnet for Corosync multicast
TRANSPORT_INTERFACE=enp100s0           # Optional override for mesh traffic

# --- Node Join Settings ---
CLUSTER_JOIN_FINGERPRINT=45:75:17:4F:AA:9F:AD:D4:D1:D8:94:D3:4E:E6:E3:AC:71:E2:3E:0D:CF:B2:06:66:44:AE:4D:C6:59:2D:5D:BD
CLUSTER_JOIN_IP=10.1.2.11                # IP of cluster master to join
CLUSTER_JOIN_NODE=pve01                  # Hostname of master node
CLUSTER_JOIN_NODES="pve02 pve03"         # Space-separated node hostnames to join
SSH_USER=root                            # SSH user for remote access

# --- Optional Enhancements ---
CLUSTER_TOKEN_AUTH=true                 # Token-based auth toggle
CLUSTER_ENCRYPTION=none                 # Transport encryption method ('none' or cipher)

# --- Script Behavior ---
DRY_RUN=true                            # Enables simulation mode


# frr config variables
SDN_ENABLED=true

# CEPH variables
# MON â†’ IP mapping for Ceph mesh
# Format: pve01=10.0.0.1 pve02=10.0.0.2 ...
CEPH_MON_MAP="pve01=fc00::81 pve02=fc00::82 pve03=fc00::83"

# Networks used in the mesh setup
CEPH_PUBLIC_NETWORK="fc00::/8"
CEPH_CLUSTER_NETWORK="fc00::/8"

# FRR routing mesh settings (.env)
# Loopback-based routing identity
FRR_ROUTER_ID="10.0.0.1"
FRR_ROUTER_ID6="fc00::81"

# Transport interfaces (space-separated)
FRR_INTERFACE="en05 en06"

# Routing networks
FRR_NETWORK="10.0.0.0/24"
FRR_NETWORK6="fc00::/8"

